<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ basics.name }} - Resume</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>{{ styles }}</style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="name">{{ basics.name }}</div>
        {% if basics.location %}
        <div>{{ basics.location.address }}{% if basics.location.city %}, {{ basics.location.city }}{% endif %}{% if basics.location.region %}, {{ basics.location.region }}{% endif %}{% if basics.location.postalCode %} {{ basics.location.postalCode }}{% endif %}</div>
        {% endif %}
        <div class="contact-info">
            {% if basics.phone %}
            <div class="contact-item">
                <i class="fas fa-phone" style="font-size: 9pt;"></i>
                <span>{{ basics.phone }}</span>
            </div>
            {% endif %}
            {% if basics.email %}
            <div class="contact-item">
                <i class="fas fa-envelope" style="font-size: 9pt;"></i>
                <a href="mailto:{{ basics.email }}">{{ basics.email }}</a>
            </div>
            {% endif %}
            {% if basics.profiles %}
                {% for profile in basics.profiles %}
                    {% if profile.network == 'LinkedIn' %}
                    <div class="contact-item">
                        <i class="fab fa-linkedin" style="font-size: 9pt;"></i>
                        <a href="{{ profile.url }}">{{ profile.url | replace('https://', '') | replace('http://', '') }}</a>
                    </div>
                    {% elif profile.network == 'GitHub' %}
                    <div class="contact-item">
                        <i class="fab fa-github" style="font-size: 9pt;"></i>
                        <a href="{{ profile.url }}">{{ profile.url | replace('https://', '') | replace('http://', '') }}</a>
                    </div>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>
    </div>
    
    <!-- Education -->
    {% if education %}
    <div class="section compact">
        <div class="section-title">Education</div>
        {% for edu in education %}
        <div class="subheading">
            <div class="subheading-left">{{ edu.institution }}</div>
            <div class="subheading-right">{{ edu.startDate }}{% if edu.endDate %} -- {{ edu.endDate }}{% endif %}</div>
        </div>
        <div class="subheading-subtitle">
            <div>{{ edu.studyType }}{% if edu.area %} in {{ edu.area }}{% endif %}</div>
            {% if edu.location %}
            <div>{{ edu.location }}</div>
            {% endif %}
        </div>
        {% if edu.courses %}
        <ul class="item-list">
            {% for course in edu.courses %}
            <li><span class="bullet"></span>{{ course }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endfor %}
    </div>
    {% endif %}
    
    <!-- Relevant Coursework -->
    {% if coursework %}
    <div class="section compact">
        <div class="section-title">Relevant Coursework</div>
        <div class="coursework-columns">
            {% set courses_per_col = (coursework | length / 4) | round(0, 'ceil') | int %}
            {% for i in range(4) %}
            <ul>
                {% for course in coursework[i*courses_per_col:(i+1)*courses_per_col] %}
                <li><span class="bullet"></span>{{ course }}</li>
                {% endfor %}
            </ul>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Experience -->
    {% if work %}
    <div class="section compact">
        <div class="section-title">Experience</div>
        {% for job in work %}
        <div class="subheading"{% if not loop.first %} style="margin-top: 8px;"{% endif %}>
            <div class="subheading-left">{{ job.name }}</div>
            <div class="subheading-right">{{ job.startDate }}{% if job.endDate %} -- {{ job.endDate }}{% endif %}</div>
        </div>
        <div class="subheading-subtitle">
            <div>{{ job.position }}</div>
            {% if job.location %}
            <div>{{ job.location }}</div>
            {% endif %}
        </div>
        {% if job.highlights %}
        <ul class="item-list">
            {% for highlight in job.highlights %}
            <li><span class="bullet"></span>{{ highlight }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endfor %}
    </div>
    {% endif %}
    
    <!-- Projects -->
    {% if projects %}
    <div class="section compact">
        <div class="section-title">Projects</div>
        {% for project in projects %}
        <div class="project-heading"{% if not loop.first %} style="margin-top: 6px;"{% endif %}>
            <div class="project-title">{{ project.name }}</div>
            {% if project.keywords %}
            <div class="project-tech">{{ project.keywords | join(', ') }}</div>
            {% endif %}
        </div>
        {% if project.startDate %}
        <div class="subheading-subtitle" style="margin-bottom: 2px;">
            <div>{{ project.startDate }}{% if project.endDate %} -- {{ project.endDate }}{% endif %}</div>
        </div>
        {% endif %}
        {% if project.highlights %}
        <ul class="item-list">
            {% for highlight in project.highlights %}
            <li><span class="bullet"></span>{{ highlight }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endfor %}
    </div>
    {% endif %}
    
    <!-- Skills -->
    {% if skills %}
    <div class="section compact">
        <div class="section-title">Technical Skills</div>
        <ul class="skills-list">
            {% for skill in skills %}
            <li><span class="skill-category">{{ skill.name }}:</span> {{ skill.keywords | join(', ') }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    <!-- Leadership / Volunteer -->
    {% if volunteer %}
    <div class="section" style="margin-bottom: 5px;">
        <div class="section-title">Leadership / Extracurricular</div>
        {% for vol in volunteer %}
        <div class="subheading">
            <div class="subheading-left">{{ vol.organization }}</div>
            <div class="subheading-right">{{ vol.startDate }}{% if vol.endDate %} -- {{ vol.endDate }}{% endif %}</div>
        </div>
        <div class="subheading-subtitle">
            <div>{{ vol.position }}</div>
            {% if vol.location %}
            <div>{{ vol.location }}</div>
            {% endif %}
        </div>
        {% if vol.highlights %}
        <ul class="item-list">
            {% for highlight in vol.highlights %}
            <li><span class="bullet"></span>{{ highlight }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endfor %}
    </div>
    {% endif %}

    <script>
        // Page fit verification and print helper
        document.addEventListener('DOMContentLoaded', function() {
            // Check if content fits on one page
            function checkPageFit() {
                const bodyHeight = document.body.scrollHeight;
                const pageHeight = 11 * 96; // 11 inches in pixels (96 DPI)
                
                if (bodyHeight > pageHeight * 0.95) {
                    console.log("Content may exceed one page. Adjusting...");
                    // Optional: Further compress spacing if needed
                    const sections = document.querySelectorAll('.section');
                    sections.forEach(section => {
                        section.style.marginBottom = '8px';
                    });
                }
            }
            
            // Add print button
            const printButton = document.createElement('button');
            printButton.innerHTML = 'Print Resume';
            printButton.style.cssText = `
                position: fixed;
                bottom: 10px;
                right: 10px;
                background: #333;
                color: white;
                border: none;
                padding: 8px 12px;
                border-radius: 4px;
                cursor: pointer;
                font-family: sans-serif;
                font-size: 11px;
                z-index: 100;
            `;
            printButton.addEventListener('click', () => {
                window.print();
            });
            document.body.appendChild(printButton);
            
            // Check page fit on load
            checkPageFit();
        });
    </script>
</body>
</html>
